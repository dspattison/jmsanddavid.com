<html>
<head>
	<title>Jeanne-Marie and David's Wedding website!</title>
	<style type="text/css">
		body{background-color: lightblue; background-image:url('img/snow2.jpg');background-attachment: fixed; background-position: center top;background-repeat: no-repeat;background-size: 1600px;}
		#main { margin-left: 100px; max-width:1200px; min-width:500px}
		#menu {position:fixed; top:0; left:0;width:100px; padding:0; text-align:center;}
		#menu ul { list-style:none;-webkit-padding-start: 0; padding:0}
		section {border: 1px solid black; border-radius: 3px; padding: 3px; margin: 5px 0 5px 0; background-color: rgba(255, 255, 255, 0.8);}
		img {max-width:100%;}
		
		figure.picture {
			display:inline; 
			float:left;
			width: 400px;}
		figcaption{text-align:center};
	</style>
	<meta name="viewport" content="width=device-width; initial-scale=1.0; " />
</head>

<body>
	<section id='menu'>
		<ul>
			<li><a href="#">Welcome</a></li>
			<li><a href="#about">About</a></li>
			<li><a href="#engagement">Engagement</a></li>
			<li><a href="#location">Location</a></li>
			<li><a href="#pictures">Pictures</a></li>
			<li><a href="#registries">Registries</a></li>
		</ul>
	</section>
	
	<div id="main">
		
		<section id="">
			<h1>We are getting married!</h1>
			<h2>Save the Date! September 21-22, 2013</h2>
			<p><img src='img/couple.jpg' alt='us'/></p>
		</section>
		
		<section id="about">
			<h1>About Us</h1>
			<p>We met at</p>
			<p><img src='img/couple.jpg' alt='us'/></p>
		</section>
		
		<section id="engagement">
			<h1>Engagement</h1>
			fedex, hike, view, picture, ring
			<p><img src='img/before_medium.jpg' alt='us'/></p>
			<p><img src='img/ring.jpg' alt='us'/></p>
			<p><img src='img/view.jpg' alt='us'/></p>
		</section>
		
		
		
		<section id="location">
			<h1>Location</h1>
			<p>Sugar Bowl, CA in the Village</p>
			<p>On the weekend of September 21st and 22nd, 2013</p>
			<p>
				Lodging is available on site.  
				It is about $135 per adult per night (double occupancy).  
				Breakfast is included. 
				Bagged lunches are available.
			</p>
			<p>More info at <a target="_blank" href="http://weddings.sugarbowl.com/">weddings.sugarbowl.com</a><p>
		</section>
		
		
		<section id="pictures" style="show:none">
			<h1>Pictures</h1>
			<!--filled in via javascript -->
		</section>
		
		<section id="registries">
			<h1>Registries</h1>
			<p>TBA</p>
		</section>
		
	</div>
	
	
	
	
	
	<script type="text/javascript" src="https://s3-us-west-1.amazonaws.com/jmsanddavid.com/js/prototype.js.gz"></script>
	<script type="text/javascript">
		(function() {
			
			var alreadyShown = false;
			var p = $('pictures');
			console.info(p);
			p.observe('jms:show', function(e) {
				console.group('picture show');
				alreadyShown = true;//mutex
				imgOrder= [20, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 1];
				captions = {
					20: "Corrine and Johnny's wedding",
					2: 'Portillo',
					4: 'Escape from Alcatraz, We got first place!!',
					8: 'Snow camping at Echo summit',
					10: 'Tatooine/Ethiopia',
					14: 'Tulum runias',
					17: 'Christening our new place in Long Beach',
					18: 'Top of Catalina Island',
					};
				var imgMarkups = $A();
				
				imgOrder.map(function (i) {
					console.info(i);
					
					var f = new Element('figure', {className: 'picture'});
					f.insert(
						new Element('a', {href: 'Pages/'+i+'.html'}).insert(
							new Element('img', {src:"Thumbnails/"+i+".jpg"})
						)
					);
					
					if (captions[i]) {
						f.insert(new Element('figcaption').insert(captions[i]));
					}
					imgMarkups.push(f);
				});
				//.insert(new Element('div',{style:'clear:both'}));
				console.info(imgMarkups);
				
				var row = null;
				table = new Element('table');
				imgMarkups.map(function(i) {
					if (row) {
						row.insert(new Element('td').insert(i));
						table.insert(row);
						row = null;
					} else {
						row = new Element('tr');
						row.insert(new Element('td').insert(i));
					}
				});
				
				p.insert(table);
				console.groupEnd();
			});
		})();
	</script>
	<script type="text/javascript">
	
		(function () {
			console.group('tabber');
			var menu = $('menu').select('a');
			var sections = $('main').select('section');

			var hideAll = function() { sections.map(function(s){s.hide();});};
			hideAll();
			
			menu.zip(sections).map(
				function(t) {
					t[0].observe('jms:show', function(e) {
						console.info('jms:show %o', t[0], t[1], e);
						hideAll();
						t[1].show();
						t[1].fire('jms:show');
						}
					);
					t[0].observe('click', function(e) {
						t[0].fire('jms:show');
						}
					);
				}
			);
			
			var hashHit = false;
			menu.zip(sections).map(
				function(t) {
					console.log(t,t[0].getAttribute('href'), window.location.hash);
					if (t[0].getAttribute('href') == window.location.hash) {
						console.info('hit');
						t[0].fire('jms:show');
						hashHit=true;
					}
				}
			);
			if (!hashHit) {
				console.info('show first');
				//show first
				menu[0].fire('jms:show');
			}
			console.groupEnd();
		})();
	</script>
	
</body>
</html>
